# 版本管理git使用技术报告
## 目录
1. git核心概念  
1.1 Remote(远程仓库)  
1.2 Repository(本地仓库)  
1.3 Index(索引/暂存区)  
1.4 Workspace(工作区)  
2. 代码流动过程  
2.1 工作区修改  
2.2 暂存更改  
2.3 提交到本地仓库  
2.4 推送到远程仓库  
2.5 拉取远程更新  
3. 管理流程  
3.1 建立清晰的分支策略  
3.2 定期提交与合并  
3.3 使用标签来管理发布版本  
3.4 保持代码库的整洁  
3.5 利用Git钩子和CI/CD集成  
4. 实现步骤  
4.1 建立仓库  
4.2 分支管理  
4.3 推送代码  
4.4 版本回退  
5. 版本控制器的方式  
5.1 集中式版本控制工具  
5.2 分布式版本控制工具  
6. 总结
## git核心概念
### Remote(远程仓库)
这是存储在远程服务器上的代码库，通常用来与团队成员共享代码。远程仓库包含了所有提交的历史记录。  
操作示例：git push（将本地仓库的更改推送到远程仓库），git pull（从远程仓库拉取更新到本地仓库）。
### Repository(本地仓库)
这是存储在本地计算机上的代码库，包含项目的所有历史提交记录。它是一个完整的版本库副本。  
操作示例：git commit（将工作区中的更改提交到本地仓库），git checkout（切换到某个特定的提交或分支）。
### Index(索引/暂存区)
索引是一个临时存储区域，用于记录即将提交到本地仓库的文件。只有在Index中的更改才会被提交。  
操作示例：git add（将工作区中的更改添加到索引中），git reset（将索引中的更改移除）。
### Workspace(工作区)
工作区是用户实际进行代码编写和编辑的地方。工作区中的文件是最新的，但未必已经被提交到索引或本地仓库。  
操作示例：编辑文件，git status（查看工作区和索引的状态差异），git diff（查看未提交的更改）。
## 代码流动过程
### 工作区修改
当你编辑文件时，变更首先在工作区中发生。  
### 暂存更改
通过git add命令将更改从工作区添加到索引。  
### 提交到本地仓库
使用git commit将索引中的更改提交到本地仓库。  
### 推送到远程仓库
通过git push命令将本地仓库的更改推送到远程仓库，与团队共享。  
### 拉取远程更新
使用git pull从远程仓库拉取最新的更改到本地仓库。
## 管理流程
### 建立清晰的分支策略
在任何项目中，建立一个清晰的分支策略是至关重要的。这通常包括主分支（master或mAIn）、特性分支（feature branches）、开发分支（develop）、以及用于准备发布的分支（如release分支）。  

主分支应该保持稳定的状态，随时可用于部署。所有从其他分支合并到主分支的更改应该是经过彻底测试和审查的。  

特性分支是从开发分支中分化出来，用于开发新功能或修复bug。每个特性分支应专注于一个具体的任务，完成后合并回开发分支。  

开发分支是团队成员日常工作的基础。这个分支应保持相对稳定，但可以比主分支更频繁地接受更改。  

发布分支用于准备即将发布的版本。在这个分支上，可以进行最后的测试和bug修复，确保产品的质量。
### 定期提交与合并
定期提交是 Git 管理中的一个重要环节。每次提交应尽可能小且专注于单一的修改或功能，这样在发生错误时可以更容易地定位问题。  

合并是将一个分支的更改引入另一个分支的过程。合并前，应确保目标分支的最新更改已经同步到当前分支，以避免冲突。在合并特性分支回开发分支或主分支之前，进行代码审查是一个好习惯，它可以帮助保证代码质量并促进团队协作。
### 使用标签来管理发布版本
在Git中，标签被用来标记特定的提交点，通常用于版本发布。通过给发布的版本打标签，团队可以轻松地追踪和切换到特定的版本。  

创建标签应在发布分支准备就绪，且即将合并到主分支时进行。这样，可以确保标签对应的版本是经过彻底测试和验证的。标签名应遵循语义化版本命名规则，如 v1.0.0，这样可以清晰地表示版本的重大更新、次要更改和补丁。
### 保持代码库的整洁
保持代码库的整洁对于长期维护项目至关重要。这包括定期清理已合并的分支、避免在主分支上进行直接更改以及保持提交历史的清晰。一种好的实践是，一旦特性分支的更改被合并到开发分支或主分支，就删除这个特性分支。这有助于减少仓库中未使用分支的积累。此外，避免在主分支上直接更改可以确保主分支的稳定性。所有的更改应该通过特性分支和相应的合并请求来完成。
### 利用Git钩子和CI/CD集成
Git钩子是自定义脚本，可以在特定的重要动作发生时运行，如提交前和提交后。利用Git钩子，可以自动执行代码风格检查、单元测试等任务，确保只有符合标准的代码才能被提交。  

持续集成/持续部署（CI/CD）是现代软件开发的重要组成部分。通过将Git与CI/CD工具集成，每次提交都可以自动触发构建和测试流程，快速发现并解决问题。这也支持自动化部署，使新的更改更快地到达用户手中。  

使用Git管理代码不仅仅是关于技术的实现，它更是一种团队协作和项目管理的文化。采用上述最佳实践，可以帮助团队更有效地利用Git，提高项目的成功率。
## 实现步骤
### 建立仓库
先在远程代码托管平台（如GitHub、GitLab等）上创建一个新的仓库，使用命令行或终端，进入你的本地项目目录。  

如果项目还没有使用Git进行版本控制，可以通过执行以下命令来初始化一个本地仓库：  
```bash
git init
```
执行以下命令将远程仓库的地址添加到本地仓库中：
```bash
git remote add origin <远程仓库地址>
```
### 分支管理
查看分支：
```bash
git branch
```
建立新分支：
```bash
git branch <新分支名称>
```
切换分支：
```bash
git checkout <要切换的分支名称>
```
推送到指定分支：
```bash
git push origin <分支名称>
```
### 推送代码
理论上改代码前要 pull 一次，然后在 push 前再 pull 一次。改代码前 pull 一次是为了获取最新的同步，但是coding也是需要时间的，难保敲代码的这段时间没有人动远程仓库的东西，所以在改完代码要 push 的时候也应该再 pull 一下看有无冲突，把冲突解决了再 push。  

1.首先切换到要 code 的分支，比如 dev 分支
```bash
git checkout dev
```
2.首先 pull 一次
```bash
git pull
```
如果是特定分支，比如dev分支
```bash
git pull origin dev
```
这样就可以获取到最新的更新并合并到当前分支
3.将所有修改的文件添加到暂存区
```bash
git add .
```
4.提交更改，如果需要可以备注更改信息，比如修改了某个文件中的问题
```bash
git commit -m "修改了某个文件中的问题"
```
5.然后再一次pull，如果没有冲突就push，默认推送到master
```bash
git pull
```
如果还没有将本地的分支与远程仓库的分支进行关联
```bash
git push --set-upstream origin master
```
推送到指定分支
```bash
git push origin <分支名称>
```
如果有冲突，改好代码后回到第3步
### 版本回退
版本回退主要使用git reset命令，回退的主要原理是修改HEAD指针的位置（HEAD指针默认指向当前工作的仓库版本）回退版本后的版本都会清除。  

回退分三种:  
第一种hard，即强硬的回退，除了仓库版本会回退，工作区与暂存区的内容也会回退（即当前工作区的内容也会被还原到指定版本）。
```bash
git reset --hard <指定版本哈希值>  
```
第二种soft，软回退，就把当前的仓库版本回退到指定版本，工作区与暂存区内容不变。  
```bash
git reset --soft <指定版本哈希值>
```
第三种mixed（默认），即把仓库版本以及暂存区都进行回退，工作区内容保存。
```bash
git reset --mixed <指定版本哈希值>
```
## 版本控制器的方式
### 集中式版本控制工具
集中式版本控制工具，版本库是集中存放在中央服务器的，team里每个人work时从中央服务器下载代 码，是必须联网才能工作，局域网或互联网。个人修改后然后提交到中央版本库。
### 分布式版本控制工具
分布式版本控制系统没有“中央服务器”，每个人的电脑上都是一个完整的版本库，这样工作的时候就不需要联网了，因为版本库就在你自己的电脑上。多人协作只需要各自的修改推送给对方，就能互相看到对方的修改了。
## 总结
Git作为强大的分布式版本控制系统，为软件开发提供了灵活的版本管理和协作能力。掌握Git的核心概念、代码流动过程、管理流程、实现步骤和版本控制器的方式，能够显著提高开发效率和代码质量。团队应根据项目规模和特点选择合适的工作流，并建立统一的Git使用规范，以最大化版本控制的效益。